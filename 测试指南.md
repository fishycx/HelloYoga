# 🧪 测试指南

## 🚀 如何运行测试

### 方法 1: 直接运行（最简单）

1. **在 Xcode 中打开项目**
   ```bash
   open HelloYoga.xcworkspace
   ```

2. **选择模拟器**
   - iPhone 14 Pro 或任何 iOS 12+ 设备

3. **运行项目** 
   - 按 `Command + R` 或点击运行按钮
   - 项目会自动加载 `TestViewController`

4. **测试功能**
   - 页面加载后会显示测试布局
   - 点击底部的**"切换布局"**按钮可以在两个布局之间切换
   - 点击页面上的任何按钮查看交互效果

---

## 📋 测试内容

### 布局 1: 默认布局 (page_layout.xml)
- ✅ 简单的三段式布局（Header + Content + Footer）
- ✅ 基础 Flexbox 布局
- ✅ 垂直排列的按钮
- ✅ 基础样式和颜色

### 布局 2: 测试布局 (test_layout.xml) 
- ✅ 复杂的多层嵌套布局
- ✅ 顶部导航栏
- ✅ 欢迎卡片（圆角、阴影、边框）
- ✅ 统计卡片行（水平布局，48% 宽度）
- ✅ 功能按钮网格（3x2 布局）
- ✅ 主次按钮（不同样式）
- ✅ 底部信息栏
- ✅ 丰富的颜色和样式（渐变色、圆角、透明度）

---

## 🎯 测试要点

### 1. XML 解析
查看控制台输出，应该看到：
```
==================================================
📋 开始加载布局: 测试布局
   XML: test_layout.xml
   JSON: test_data.json
==================================================
✅ XML 解析成功
✅ 视图树构建成功
✅ JSON 数据加载成功: 13 个数据项
✅ 数据绑定完成
🎉 页面加载完成！
==================================================
```

### 2. Yoga 布局计算
- 检查各个元素的位置是否正确
- 检查 Flexbox 布局是否生效（居中、间距、对齐）
- 旋转设备/模拟器查看自适应效果

### 3. 数据绑定
- 所有文本内容应该来自 JSON 文件
- 按钮标题应该正确显示
- 统计数字应该正确显示

### 4. 样式应用
- 颜色是否正确（十六进制和系统颜色）
- 圆角是否生效
- 边框是否显示
- 透明度是否正确
- 字体大小和粗细是否正确

### 5. 交互功能
- 点击任何按钮应该弹出提示框
- 点击"切换布局"应该平滑切换布局
- 控制台应该打印按钮点击信息

---

## 🐛 调试技巧

### 查看控制台日志
运行时观察控制台输出：
- `📋` 开始加载布局
- `✅` 成功标记
- `❌` 错误标记
- `⚠️` 警告标记
- `🔘` 按钮点击
- `♻️` 内存释放

### 常见问题

**Q: 页面是空白的**
- 检查 XML 和 JSON 文件是否正确添加到项目
- 查看控制台是否有错误信息
- 确保文件名正确（不包含 .xml 或 .json 后缀）

**Q: 数据没有显示**
- 检查 JSON 文件格式是否正确
- 确保 XML 中的 `id` 与 JSON 中的 key 匹配
- 查看控制台的数据绑定日志

**Q: 布局混乱**
- 检查 XML 中的 Flexbox 属性是否正确
- 确保宽度和高度单位正确（数字或百分比）
- 检查嵌套层级是否正确

**Q: 编译错误**
- 确保所有新文件都添加到了 Target
- 检查 Podfile 是否正确安装
- Clean Build Folder (`Command + Shift + K`)

---

## 🎨 自定义测试

### 创建自己的布局

1. **创建新的 XML 文件**
   ```xml
   <?xml version="1.0" encoding="UTF-8"?>
   <container flexDirection="column">
       <text id="myText" fontSize="20"/>
   </container>
   ```

2. **创建对应的 JSON 文件**
   ```json
   {
     "myText": "我的自定义文本"
   }
   ```

3. **在 TestViewController 中添加**
   ```swift
   private let layouts = [
       ("page_layout", "page_data", "默认布局"),
       ("test_layout", "test_data", "测试布局"),
       ("my_layout", "my_data", "我的布局")  // 添加这行
   ]
   ```

4. **重新运行项目**

---

## 📊 性能测试

### 测试场景

1. **布局切换速度**
   - 快速点击"切换布局"按钮
   - 观察过渡动画是否流畅

2. **内存管理**
   - 多次切换布局
   - 使用 Xcode Instruments 检查内存泄漏
   - 观察控制台的 `♻️ 已释放` 信息

3. **布局计算性能**
   - 旋转设备查看重新布局速度
   - 复杂布局的计算时间

---

## ✅ 预期结果

运行测试后，你应该看到：

### 布局 1 (默认)
```
┌─────────────────────────┐
│   Header (蓝色)         │
│   Hello Yoga Layout!    │
├─────────────────────────┤
│                         │
│   描述文字              │
│                         │
│   [按钮 1]              │
│   [按钮 2]              │
│   [按钮 3]              │
│                         │
├─────────────────────────┤
│   Footer (灰色)         │
└─────────────────────────┘
```

### 布局 2 (测试)
```
┌─────────────────────────┐
│  导航栏 (蓝色)          │
├─────────────────────────┤
│  欢迎卡片               │
├─────────────────────────┤
│  [统计1]    [统计2]     │
├─────────────────────────┤
│  [功能1][功能2][功能3]  │
│  [功能4][功能5][功能6]  │
├─────────────────────────┤
│  [主要按钮]             │
│  [次要按钮]             │
├─────────────────────────┤
│  底部信息栏             │
└─────────────────────────┘
```

---

## 🎉 测试成功标志

- ✅ 页面正常显示，无空白
- ✅ 所有文本内容正确显示
- ✅ 布局符合 XML 描述
- ✅ 颜色和样式正确应用
- ✅ 按钮可以点击并弹出提示
- ✅ 切换布局流畅无卡顿
- ✅ 控制台无错误信息
- ✅ 旋转设备布局自适应

---

祝测试顺利！🚀

